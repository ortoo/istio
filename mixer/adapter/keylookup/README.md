This is a simple keylookup adapter for istio's policy. It was a bit fiddly to configure,
but once the bits and pieces are in place. You configure it (istio side) with a number of values
and it reverse searches them

e.g. 

```yaml
params:
  valid_duration: 5s
  map:
    - key: governorhub
      values:
        - governorhub.com
        - api.governorhub.com
        - myaccount.governorhub.com
        - auth.governorhub.com
        - app.governorhub.com
        - admin.governorhub.com
        - files.governorhub.com
        - tasks.governorhub.com
        - reports.governorhub.com
        
    - key: earheart
      values:
        - api.earhart.ortoo.tech
```

sending in "tasks.governorhub.com" will give you the key "governorhub" back.

Docs for creating and adapter came from here: https://github.com/istio/istio/wiki/Mixer-Out-Of-Process-Adapter-Dev-Guide

- `config/config.proto` the proto definition for the configuration of the adapter (i.e. the stuff above)
- `template/template.proto` for configuring what is sent in

The rest is autogenerated when going to the top of the repo and doing `BUILD_WITH_CONTAINER=1 make gen`

- I found that the autogen didn't set the template name correctly - I needed to tweak it in `template/template.yaml`

- To run the tests, from this dir do, `go build ./... && go test *.go`. The tests don't check the output as I couldn't quickly work out how to get the output...

- To build the docker image go to the `cmd` folder and run `make docker`. Then push the image up as required
